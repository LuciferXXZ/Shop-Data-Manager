{
  "version": "1.0",
  "records": [
    {
      "filePath": "C:/Users/22951/IdeaProjects/Shop-Data-Manager/src/test/java/com/docker/mall/shopdatamanager/ShopDataManagerApplicationTests.java",
      "timestamp": 1763712176300,
      "startOffset": 49,
      "endOffset": 2062,
      "codeContent": "com.docker.mall.shopdatamanager.entity.Product;\nimport com.docker.mall.shopdatamanager.service.ProductService;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.Mockito;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.web.servlet.MockMvc;\n\nimport java.math.BigDecimal;\nimport java.util.Arrays;\nimport java.util.Optional;\n\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@SpringBootTest\n@AutoConfigureMockMvc\nclass ShopDataManagerApplicationTests {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private ProductService productService;\n\n    @Test\n    void testGetAllProducts() throws Exception {\n        // 1. æ¨¡æ‹Ÿ Service è¿”å›çš„æ•°æ®\n        Product p1 \u003d new Product();\n        p1.setId(1L);\n        p1.setName(\"æµ‹è¯•å•†å“A\");\n        p1.setPrice(BigDecimal.valueOf(100.0));\n\n        Mockito.when(productService.findAll()).thenReturn(Arrays.asList(p1));\n\n        // 2. å‘èµ· GET è¯·æ±‚å¹¶éªŒè¯ç»“æœ\n        mockMvc.perform(get(\"/api/products\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$[0].name\").value(\"æµ‹è¯•å•†å“A\"));\n    }\n\n    @Test\n    void testCreateProduct() throws Exception {\n        Product p \u003d new Product();\n        p.setName(\"æ–°å•†å“\");\n        p.setPrice(BigDecimal.valueOf(99.9));\n\n        Mockito.when(productService.save(Mockito.any(Product.class))).thenReturn(p);\n\n        mockMvc.perform(post(\"/api/products\")\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(new ObjectMapper().writeValueAsString(p)))\n                .andExpect(status().isOk());\n    }\n}",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 59
    },
    {
      "filePath": "C:/Users/22951/IdeaProjects/Shop-Data-Manager/src/main/java/com/docker/mall/shopdatamanager/repository/ProductRepository.java",
      "timestamp": 1763735882928,
      "startOffset": 170,
      "endOffset": 386,
      "codeContent": "import java.util.List;\n\npublic interface ProductRepository extends JpaRepository\u003cProduct, Long\u003e {\n    //è¿™è¡Œä»£ç ä¼šè‡ªåŠ¨ç”Ÿæˆ SQL: SELECT * FROM product WHERE name LIKE %name%\n    List\u003cProduct\u003e findByNameContaining(String name);",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 5
    },
    {
      "filePath": "C:/Users/22951/IdeaProjects/Shop-Data-Manager/src/main/java/com/docker/mall/shopdatamanager/service/ProductService.java",
      "timestamp": 1763735959486,
      "startOffset": 344,
      "endOffset": 863,
      "codeContent": "\npublic class ProductService {\n\n    @Autowired\n    private ProductRepository repository;\n\n    // ä¿®æ”¹ï¼šå¢åŠ  keyword å‚æ•°\n    public List\u003cProduct\u003e findAll(String keyword) {\n        if (keyword !\u003d null \u0026\u0026 !keyword.isEmpty()) {\n            return repository.findByNameContaining(keyword);\n        }\n        return repository.findAll();\n    }\n\n    public Optional\u003cProduct\u003e findById(Long id) {\n        return repository.findById(id);\n    }\n\n    public Product save(Product product) {\n        return repository.save(product);\n    }\n",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 22
    },
    {
      "filePath": "C:/Users/22951/IdeaProjects/Shop-Data-Manager/src/main/java/com/docker/mall/shopdatamanager/controller/ProductController.java",
      "timestamp": 1763736533294,
      "startOffset": 261,
      "endOffset": 1867,
      "codeContent": "data.domain.Page;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping(\"/api/products\")\n@CrossOrigin(origins \u003d \"*\") // å…è®¸å‰ç«¯è·¨åŸŸè®¿é—®\npublic class ProductController {\n\n    @Autowired\n    private ProductService service;\n\n    // æ ¸å¿ƒä¿®æ”¹ï¼šè¿”å›ç±»å‹å˜ä¸º Page\u003cProduct\u003eï¼Œæ¥æ”¶åˆ†é¡µå‚æ•°\n    // @RequestParam defaultValue è®¾ç½®é»˜è®¤å€¼ï¼šé»˜è®¤çœ‹ç¬¬0é¡µï¼Œæ¯é¡µ5æ¡\n    @GetMapping\n    public Page\u003cProduct\u003e getAllProducts(\n            @RequestParam(required \u003d false) String name,\n            @RequestParam(defaultValue \u003d \"0\") int page,\n            @RequestParam(defaultValue \u003d \"5\") int size) {\n        return service.findAll(name, page, size);\n    }\n\n    // --- ä»¥ä¸‹ä»£ç æœªå˜åŠ¨ ---\n\n    @GetMapping(\"/{id}\")\n    public ResponseEntity\u003cProduct\u003e getProductById(@PathVariable Long id) {\n        return service.findById(id)\n                .map(ResponseEntity::ok)\n                .orElse(ResponseEntity.notFound().build());\n    }\n\n    @PostMapping\n    public Product createProduct(@RequestBody Product product) {\n        return service.save(product);\n    }\n\n    @PutMapping(\"/{id}\")\n    public ResponseEntity\u003cProduct\u003e updateProduct(@PathVariable Long id, @RequestBody Product product) {\n        return service.findById(id)\n                .map(existing -\u003e {\n                    existing.setName(product.getName());\n                    existing.setPrice(product.getPrice());\n                    existing.setDescription(product.getDescription());\n                    return ResponseEntity.ok(service.save(existing));\n                })\n                .orElse(ResponseEntity.notFound().build());\n    }\n",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 48
    },
    {
      "filePath": "C:/Users/22951/IdeaProjects/Shop-Data-Manager/src/main/java/com/docker/mall/shopdatamanager/service/ProductService.java",
      "timestamp": 1763736965599,
      "startOffset": 493,
      "endOffset": 1127,
      "codeContent": "List;\nimport java.util.Optional;\n\n@Service\npublic class ProductService {\n\n    @Autowired\n    private ProductRepository repository;\n\n    // 1. åˆ†é¡µæŸ¥è¯¢ (æ”¯æŒæœç´¢) - ç»™åˆ—è¡¨ç”¨\n    public Page\u003cProduct\u003e findAll(String keyword, int page, int size) {\n        // åˆ›å»ºåˆ†é¡µå¯¹è±¡ï¼šæŒ‰ id å€’åºæ’åˆ—\n        Pageable pageable \u003d PageRequest.of(page, size, Sort.by(\"id\").descending());\n\n        if (keyword !\u003d null \u0026\u0026 !keyword.isEmpty()) {\n            return repository.findByNameContaining(keyword, pageable);\n        }\n        return repository.findAll(pageable);\n    }\n\n    // 2. æŸ¥è¯¢æ‰€æœ‰ (ä¸åˆ†é¡µ) - ç»™å›¾è¡¨ç”¨\n    public List\u003cProduct\u003e findAllList() {\n        return repository.findAll(",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 23
    },
    {
      "filePath": "C:/Users/22951/IdeaProjects/Shop-Data-Manager/src/test/java/com/docker/mall/shopdatamanager/ShopDataManagerApplicationTests.java",
      "timestamp": 1763737232849,
      "startOffset": 695,
      "endOffset": 1914,
      "codeContent": "\n// \u003d\u003d\u003d â­ æ ¸å¿ƒä¿®å¤ï¼šæ·»åŠ è¿™ä¸¤è¡Œé™æ€å¯¼å…¥ \u003d\u003d\u003d\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@SpringBootTest\n@AutoConfigureMockMvc\nclass ShopDataManagerApplicationTests {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private ProductService productService;\n\n    @Test\n    void testGetAllProducts() throws Exception {\n        // 1. æ¨¡æ‹Ÿ Service è¿”å›çš„æ•°æ®\n        Product p1 \u003d new Product();\n        p1.setId(1L);\n        p1.setName(\"æµ‹è¯•å•†å“A\");\n        p1.setPrice(BigDecimal.valueOf(100.0));\n\n        Mockito.when(productService.findAll()).thenReturn(Arrays.asList(p1));\n\n        // 2. å‘èµ· GET è¯·æ±‚å¹¶éªŒè¯ç»“æœ\n        // è¿™é‡Œçš„ get(), status(), jsonPath() ç°åœ¨åº”è¯¥éƒ½ä¸æŠ¥çº¢äº†\n        mockMvc.perform(get(\"/api/products\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$[0].name\").value(\"æµ‹è¯•å•†å“A\"));\n    }\n\n    @Test\n    void testCreateProduct() throws Exception {\n        Product p \u003d new Product();\n        p.setName(\"æ–°å•†å“\");\n        p.setPrice(BigDecimal.valueOf(99.9));\n\n        Mockito.when(productService.save(Mockito.any(Product.class))).thenReturn(p);\n\n        // è¿™é‡Œçš„ post(), status() ä¹Ÿåº”è¯¥å¥½äº†",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 41
    },
    {
      "filePath": "/ShopDataManagerApplicationTests.java",
      "timestamp": 1763738305593,
      "startOffset": 969,
      "endOffset": 989,
      "codeContent": "IntellijIdeaRulezzz;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "C:/Users/22951/IdeaProjects/Shop-Data-Manager/src/test/java/com/docker/mall/shopdatamanager/ShopDataManagerApplicationTests.java",
      "timestamp": 1763738480749,
      "startOffset": 743,
      "endOffset": 1900,
      "codeContent": " // ç¡®ä¿å¯¼å…¥ Arrays ç±»\n\n// \u003d\u003d\u003d æ ¸å¿ƒä¿®å¤ï¼šæ·»åŠ é™æ€å¯¼å…¥ \u003d\u003d\u003d\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\nimport static java.util.Arrays.asList; // ğŸ”´ è¿™ä¸€è¡Œæ˜¯è§£å†³ä½ å½“å‰é—®é¢˜çš„å…³é”®\n\n@SpringBootTest\n@AutoConfigureMockMvc\npublic class ShopDataManagerApplicationTests {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private ProductService productService;\n\n    @Test\n    void testGetAllProducts() throws Exception {\n        // 1. å‡†å¤‡æ¨¡æ‹Ÿæ•°æ®\n        Product p1 \u003d new Product();\n        p1.setId(1L);\n        p1.setName(\"æµ‹è¯•å•†å“A\");\n        p1.setPrice(BigDecimal.valueOf(100.0));\n\n        // 2. ä¿®æ”¹ Mock è¡Œä¸ºï¼š\n        // Mockito.any() åŒ¹é…æ‰€æœ‰å‚æ•°\n        // è¿”å›å€¼ PageImpl\u003c\u003e(Arrays.asList(p1))\n        Mockito.when(productService.findAll(Mockito.any(), Mockito.anyInt(), Mockito.anyInt()))\n                // ğŸ”´ æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä½¿ç”¨ Arrays.asListï¼Œå› ä¸ºå®ƒç°åœ¨å·²ç»è¢«é™æ€å¯¼å…¥äº†\n                .thenReturn(new PageImpl\u003c\u003e(Arrays.asList(p1)));\n\n        // 3. å‘èµ·è¯·æ±‚å¹¶éªŒè¯\n        mockMvc.perform(get(\"/api/products\"))\n                .andExpect(status().isOk())\n                // éªŒè¯åˆ†é¡µè¿”å›çš„ content å­—æ®µé‡Œçš„ç¬¬ä¸€ä¸ªå•†å“çš„ ",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 36
    },
    {
      "filePath": "C:/Users/22951/IdeaProjects/Shop-Data-Manager/src/test/java/com/docker/mall/shopdatamanager/ShopDataManagerApplicationTests.java",
      "timestamp": 1763740474257,
      "startOffset": 108,
      "endOffset": 4469,
      "codeContent": "fasterxml.jackson.databind.ObjectMapper;\nimport org.junit.jupiter.api.MethodOrderer;\nimport org.junit.jupiter.api.Order;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.TestMethodOrder;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\n// âŒ ç§»é™¤ Mockito ç›¸å…³çš„ import (å¦‚ org.mockito.Mockito)\n\nimport org.springframework.http.MediaType;\nimport org.springframework.test.web.servlet.MockMvc;\n\nimport java.math.BigDecimal;\nimport java.util.Optional; // å¯¼å…¥ Optional\n\n// \u003d\u003d\u003d æ ¸å¿ƒä¿®å¤ï¼šæ˜¾å¼å¯¼å…¥ MockMvc æ–¹æ³•å’Œç»“æœåŒ¹é…å™¨ \u003d\u003d\u003d\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n// ç¡®ä¿æ•´ä¸ªåº”ç”¨ä¸Šä¸‹æ–‡è¢«åŠ è½½ï¼Œä½¿ç”¨ä¸€ä¸ªéšæœºç«¯å£è¿›è¡Œæµ‹è¯•\n@SpringBootTest(webEnvironment \u003d SpringBootTest.WebEnvironment.RANDOM_PORT)\n@AutoConfigureMockMvc\n// ç¡®ä¿æµ‹è¯•æŒ‰é¡ºåºæ‰§è¡Œï¼Œä»¥ä¾¿ CRUD æµç¨‹èƒ½æ­£å¸¸è¿è¡Œ\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\npublic class ShopDataManagerApplicationTests {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    // 1. æµ‹è¯•æ–°å¢ (Create)\n    @Test\n    @Order(1) // ä¿è¯ç¬¬ä¸€ä¸ªæ‰§è¡Œ\n    void testCreateProduct() throws Exception {\n        Product p \u003d new Product();\n        p.setName(\"æµ‹è¯•å•†å“ - é”®ç›˜\");\n        p.setPrice(BigDecimal.valueOf(299.99));\n        p.setDescription(\"æµ‹è¯•æ–°å¢çš„å•†å“\");\n\n        // å‘èµ· POST è¯·æ±‚ï¼ŒéªŒè¯æ˜¯å¦æˆåŠŸï¼ˆè¿”å› 200 OKï¼‰\n        mockMvc.perform(post(\"/api/products\")\n                        .contentType(MediaType.APPLICATION_JSON)\n                        // ä½¿ç”¨ ObjectMapper å°†å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²\n                        .content(new ObjectMapper().writeValueAsString(p)))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.id\").exists()) // éªŒè¯ ID æ˜¯å¦å·²è¢«ç”Ÿæˆ\n                .andExpect(jsonPath(\"$.name\").value(\"æµ‹è¯•å•†å“ - é”®ç›˜\"));\n    }\n\n    // 2. æµ‹è¯•åˆ†é¡µæŸ¥è¯¢ (Read - List with Search)\n    @Test\n    @Order(2)\n    void testGetAllProductsAndSearch() throws Exception {\n        // 2.1 æµ‹è¯•é»˜è®¤åˆ†é¡µåˆ—è¡¨ï¼ˆåº”è‡³å°‘åŒ…å« init.sql çš„ 3 ä¸ª + ä¸Šä¸€æ­¥æ–°å¢çš„ 1 ä¸ªï¼‰\n        mockMvc.perform(get(\"/api/products?page\u003d0\u0026size\u003d5\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.content\").isArray()) // éªŒè¯è¿”å›çš„æ˜¯åˆ†é¡µç»“æ„\n                .andExpect(jsonPath(\"$.totalPages\").exists())\n                // éªŒè¯å•†å“åˆ—è¡¨ä¸ä¸ºç©ºï¼Œä¸”åŒ…å«æˆ‘ä»¬æ–°å¢çš„å•†å“\n                .andExpect(jsonPath(\"$.content[0].name\").value(\"æµ‹è¯•å•†å“ - é”®ç›˜\")); \n\n        // 2.2 æµ‹è¯•æ¨¡ç³ŠæŸ¥è¯¢åŠŸèƒ½ (æ ¹æ® name\u003dé”®ç›˜ æœç´¢)\n        mockMvc.perform(get(\"/api/products?name\u003dé”®ç›˜\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.content\").isArray())\n                .andExpect(jsonPath(\"$.content[0].name\").value(\"æµ‹è¯•å•†å“ - é”®ç›˜\"));\n    }\n    \n    // 3. æµ‹è¯•è·å–è¯¦æƒ… (Read - Detail)\n    @Test\n    @Order(3)\n    void testGetProductById() throws Exception {\n        // ç”±äº init.sql æ’å…¥äº† 3 æ¡æ•°æ®ï¼Œæˆ‘ä»¬å°è¯•æŸ¥è¯¢ ID\u003d1 çš„æ•°æ®\n        mockMvc.perform(get(\"/api/products/1\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.id\").value(1L))\n                .andExpect(jsonPath(\"$.name\").value(\"Dockerå…¥é—¨æ•™ç¨‹\"));\n        \n        // æµ‹è¯•æŸ¥è¯¢ä¸å­˜åœ¨çš„ ID\n        mockMvc.perform(get(\"/api/products/999\"))\n                .andExpect(status().isNotFound()); // éªŒè¯è¿”å› 404\n    }\n\n    // 4. æµ‹è¯•ä¿®æ”¹ (Update)\n    @Test\n    @Order(4)\n    void testUpdateProduct() throws Exception {\n        // å‡è®¾è¦ä¿®æ”¹ ID\u003d1 çš„å•†å“\n        Product updateData \u003d new Product();\n        updateData.setName(\"Dockerå…¥é—¨æ•™ç¨‹ (å·²ä¿®æ”¹)\");\n        updateData.setPrice(BigDecimal.valueOf(66.66)); // ä¿®æ”¹ä»·æ ¼\n        updateData.setDescription(\"ä¿®æ”¹åçš„æè¿°\");\n\n        // å‘èµ· PUT è¯·æ±‚ï¼Œä¿®æ”¹ ID ä¸º 1 çš„å•†å“\n        mockMvc.perform(put(\"/api/products/1\")\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(new ObjectMapper().writeValueAsString(updateData)))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.name\").value(\"Dockerå…¥é—¨æ•™ç¨‹ (å·²ä¿®æ”¹)\"))\n                .andExpect(jsonPath(\"$.price\").value(66.66)); // éªŒè¯ä»·æ ¼æ›´æ–°\n    }\n\n    // 5. æµ‹è¯•åˆ é™¤ (Delete)\n    @Test\n    @Order(5)\n    void testDeleteProduct() throws Exception {\n        // å‡è®¾è¦åˆ é™¤ ID\u003d2 çš„å•†å“\n        mockMvc.perform(delete(\"/api/products/2\"))\n                .andExpect(status().isOk()); // éªŒè¯åˆ é™¤æˆåŠŸï¼ˆè¿”å› 200 OKï¼‰\n\n        // éªŒè¯å•†å“æ˜¯å¦çœŸçš„è¢«åˆ é™¤ (æŸ¥è¯¢ ID\u003d2 è¯¦æƒ…æ¥å£åº”è¯¥è¿”å› 404)\n        mockMvc.perform(get(\"/api/products/2\"))\n                .andExpect(status().isNotFound",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 113
    },
    {
      "filePath": "C:/Users/22951/IdeaProjects/Shop-Data-Manager/src/test/java/com/docker/mall/shopdatamanager/ShopDataManagerApplicationTests.java",
      "timestamp": 1763742144608,
      "startOffset": 519,
      "endOffset": 3219,
      "codeContent": "import org.springframework.http.MediaType;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.transaction.annotation.Transactional; // âš ï¸ æ–°å¢å¯¼å…¥\n\nimport java.math.BigDecimal;\n\n// \u003d\u003d\u003d æ ¸å¿ƒä¿®å¤ï¼šæ˜¾å¼å¯¼å…¥ MockMvc æ–¹æ³•å’Œç»“æœåŒ¹é…å™¨ \u003d\u003d\u003d\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@SpringBootTest(webEnvironment \u003d SpringBootTest.WebEnvironment.RANDOM_PORT)\n@AutoConfigureMockMvc\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\n@Transactional // âš ï¸ å…³é”®ä¿®å¤ï¼šç¡®ä¿æ¯ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œåï¼Œæ‰€æœ‰æ•°æ®åº“æ“ä½œéƒ½ä¼šè‡ªåŠ¨å›æ»šã€‚\npublic class ShopDataManagerApplicationTests {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    // 1. æµ‹è¯•æ–°å¢ (Create)\n    @Test\n    @Order(1) // ä¿è¯ç¬¬ä¸€ä¸ªæ‰§è¡Œ\n    void testCreateProduct() throws Exception {\n        Product p \u003d new Product();\n        p.setName(\"æµ‹è¯•å•†å“ - é”®ç›˜\");\n        p.setPrice(BigDecimal.valueOf(299.99));\n        p.setDescription(\"æµ‹è¯•æ–°å¢çš„å•†å“\");\n\n        // å‘èµ· POST è¯·æ±‚ï¼ŒéªŒè¯æ˜¯å¦æˆåŠŸï¼ˆè¿”å› 200 OKï¼‰\n        mockMvc.perform(post(\"/api/products\")\n                        .contentType(MediaType.APPLICATION_JSON)\n                        // ä½¿ç”¨ ObjectMapper å°†å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²\n                        .content(new ObjectMapper().writeValueAsString(p)))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.id\").exists()) // éªŒè¯ ID æ˜¯å¦å·²è¢«ç”Ÿæˆ\n                .andExpect(jsonPath(\"$.name\").value(\"æµ‹è¯•å•†å“ - é”®ç›˜\"));\n    }\n\n    // 2. æµ‹è¯•åˆ†é¡µæŸ¥è¯¢ (Read - List with Search)\n    @Test\n    @Order(2)\n    void testGetAllProductsAndSearch() throws Exception {\n        // 2.1 æµ‹è¯•é»˜è®¤åˆ†é¡µåˆ—è¡¨ï¼ˆåº”è‡³å°‘åŒ…å« init.sql çš„ 3 ä¸ª + ä¸Šä¸€æ­¥æ–°å¢çš„ 1 ä¸ªï¼‰\n        mockMvc.perform(get(\"/api/products?page\u003d0\u0026size\u003d5\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.content\").isArray()) // éªŒè¯è¿”å›çš„æ˜¯åˆ†é¡µç»“æ„\n                .andExpect(jsonPath(\"$.totalPages\").exists())\n                // éªŒè¯å•†å“åˆ—è¡¨ä¸ä¸ºç©ºï¼Œä¸”åŒ…å«æˆ‘ä»¬æ–°å¢çš„å•†å“\n                .andExpect(jsonPath(\"$.content[0].name\").value(\"æµ‹è¯•å•†å“ - é”®ç›˜\")); \n\n        // 2.2 æµ‹è¯•æ¨¡ç³ŠæŸ¥è¯¢åŠŸèƒ½ (æ ¹æ® name\u003dé”®ç›˜ æœç´¢)\n        mockMvc.perform(get(\"/api/products?name\u003dé”®ç›˜\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.content\").isArray())\n                .andExpect(jsonPath(\"$.content[0].name\").value(\"æµ‹è¯•å•†å“ - é”®ç›˜\"));\n    }\n    \n    // 3. æµ‹è¯•è·å–è¯¦æƒ… (Read - Detail)\n    @Test\n    @Order(3)\n    void testGetProductById() throws Exception {\n        // ç”±äº init.sql æ’å…¥äº† 3 æ¡æ•°æ®ï¼Œæˆ‘ä»¬å°è¯•æŸ¥è¯¢ ID\u003d1 çš„æ•°æ®\n        // æ­¤æ—¶ç”±äº @Transactional å›æ»šï¼ŒID\u003d1 çš„æ•°æ®åº”ä¸ºåˆå§‹çŠ¶æ€\n        mockMvc.perform(get(\"/api/products/1\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.id\").value(1L))\n                .andExpect(jsonPath(\"$.name\").value(\"Dockerå…¥é—¨æ•™ç¨‹\"));\n        ",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 68
    },
    {
      "filePath": "C:/Users/22951/IdeaProjects/Shop-Data-Manager/src/main/java/com/docker/mall/shopdatamanager/service/ProductService.java",
      "timestamp": 1763795119352,
      "startOffset": 39,
      "endOffset": 4501,
      "codeContent": ";\n\nimport com.docker.mall.shopdatamanager.entity.Product;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.junit.jupiter.api.MethodOrderer;\nimport org.junit.jupiter.api.Order;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.TestMethodOrder;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\n\n// \u003d\u003d\u003d æ ¸å¿ƒä¿®å¤ï¼šæ˜¾å¼å¯¼å…¥ MockMvc æ–¹æ³•å’Œç»“æœåŒ¹é…å™¨ \u003d\u003d\u003d\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@SpringBootTest(webEnvironment \u003d SpringBootTest.WebEnvironment.RANDOM_PORT)\n@AutoConfigureMockMvc\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class)\n@Transactional // ç¡®ä¿æ¯ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œåï¼Œæ‰€æœ‰æ•°æ®åº“æ“ä½œéƒ½ä¼šè‡ªåŠ¨å›æ»šã€‚\npublic class ShopDataManagerApplicationTests {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    // 1. æµ‹è¯•æ–°å¢ (Create)\n    @Test\n    @Order(1) // ä¿è¯ç¬¬ä¸€ä¸ªæ‰§è¡Œ\n    void testCreateProduct() throws Exception {\n        Product p \u003d new Product();\n        p.setName(\"æµ‹è¯•å•†å“ - é”®ç›˜\");\n        p.setPrice(BigDecimal.valueOf(299.99));\n        p.setDescription(\"æµ‹è¯•æ–°å¢çš„å•†å“\");\n\n        // å‘èµ· POST è¯·æ±‚ï¼ŒéªŒè¯æ˜¯å¦æˆåŠŸï¼ˆè¿”å› 200 OKï¼‰\n        mockMvc.perform(post(\"/api/products\")\n                        .contentType(MediaType.APPLICATION_JSON)\n                        // ä½¿ç”¨ ObjectMapper å°†å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²\n                        .content(new ObjectMapper().writeValueAsString(p)))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.id\").exists()) // éªŒè¯ ID æ˜¯å¦å·²è¢«ç”Ÿæˆ\n                .andExpect(jsonPath(\"$.name\").value(\"æµ‹è¯•å•†å“ - é”®ç›˜\"));\n    }\n\n    // 2. æµ‹è¯•åˆ†é¡µæŸ¥è¯¢ (Read - List with Search)\n    @Test\n    @Order(2)\n    void testGetAllProductsAndSearch() throws Exception {\n        // 2.1 æµ‹è¯•é»˜è®¤åˆ†é¡µåˆ—è¡¨\n        mockMvc.perform(get(\"/api/products?page\u003d0\u0026size\u003d5\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.content\").isArray()) // éªŒè¯è¿”å›çš„æ˜¯åˆ†é¡µç»“æ„\n                .andExpect(jsonPath(\"$.totalPages\").exists())\n                // âš ï¸ ä¿®å¤ç‚¹ï¼šåˆ—è¡¨ç°åœ¨æ˜¯å‡åºæ’åˆ—ï¼Œç¬¬ä¸€ä¸ªåº”è¯¥æ˜¯ ID\u003d1 çš„æœ€æ—§å•†å“ï¼Œå…¶åç§°ä¸º \"Dockerå…¥é—¨æ•™ç¨‹ (å·²ä¿®æ”¹)\"\n                .andExpect(jsonPath(\"$.content[0].name\").value(\"Dockerå…¥é—¨æ•™ç¨‹ (å·²ä¿®æ”¹)\")); \n\n        // 2.2 æµ‹è¯•æ¨¡ç³ŠæŸ¥è¯¢åŠŸèƒ½ (æ ¹æ® name\u003dé”®ç›˜ æœç´¢)\n        mockMvc.perform(get(\"/api/products?name\u003dé”®ç›˜\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.content\").isArray())\n                // âš ï¸ ä¿®å¤ç‚¹ï¼šæœç´¢ç»“æœä¹Ÿæ˜¯å‡åºï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªåŒ¹é… \"é”®ç›˜\" çš„åº”è¯¥æ˜¯ ID 3 çš„ \"æœºæ¢°é”®ç›˜\"\n                .andExpect(jsonPath(\"$.content[0].name\").value(\"æœºæ¢°é”®ç›˜\")); \n    }\n    \n    // 3. æµ‹è¯•è·å–è¯¦æƒ… (Read - Detail)\n    @Test\n    @Order(3)\n    void testGetProductById() throws Exception {\n        // æŸ¥è¯¢ ID\u003d3 çš„å•†å“ (æœºæ¢°é”®ç›˜)ï¼Œè¯¥å•†å“åœ¨åç»­æµ‹è¯•ä¸­ä¸ä¼šè¢«ä¿®æ”¹ï¼Œé¿å…æ•°æ®æ±¡æŸ“ã€‚\n        mockMvc.perform(get(\"/api/products/3\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.id\").value(3L))\n                .andExpect(jsonPath(\"$.name\").value(\"æœºæ¢°é”®ç›˜\")); \n        \n        // æµ‹è¯•æŸ¥è¯¢ä¸å­˜åœ¨çš„ ID\n        mockMvc.perform(get(\"/api/products/999\"))\n                .andExpect(status().isNotFound()); // éªŒè¯è¿”å› 404\n    }\n\n    // 4. æµ‹è¯•ä¿®æ”¹ (Update)\n    @Test\n    @Order(4)\n    void testUpdateProduct() throws Exception {\n        // å‡è®¾è¦ä¿®æ”¹ ID\u003d1 çš„å•†å“\n        Product updateData \u003d new Product();\n        updateData.setName(\"Dockerå…¥é—¨æ•™ç¨‹ (å·²ä¿®æ”¹)\");\n        updateData.setPrice(BigDecimal.valueOf(66.66)); // ä¿®æ”¹ä»·æ ¼\n        updateData.setDescription(\"ä¿®æ”¹åçš„æè¿°\");\n\n        // å‘èµ· PUT è¯·æ±‚ï¼Œä¿®æ”¹ ID ä¸º 1 çš„å•†å“\n        mockMvc.perform(put(\"/api/products/1\")\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(new ObjectMapper().writeValueAsString(updateData)))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.name\").value(\"Dockerå…¥é—¨æ•™ç¨‹ (å·²ä¿®æ”¹)\"))\n                .andExpect(jsonPath(\"$.price\").value(66.66)); // éªŒè¯ä»·æ ¼æ›´æ–°\n    }\n\n    // 5. æµ‹è¯•åˆ é™¤ (Delete)\n    @Test\n    @Order(5)\n    void testDeleteProduct() throws Exception {\n        // å‡è®¾è¦åˆ é™¤ ID\u003d2 çš„å•†å“\n        mockMvc.perform(delete(\"/api/products/2\"))\n                .andExpect(status().isOk()); // éªŒè¯åˆ é™¤æˆåŠŸï¼ˆè¿”å› 200 OKï¼‰\n\n        // éªŒè¯å•†å“æ˜¯å¦çœŸçš„è¢«åˆ é™¤ (æŸ¥è¯¢ ID\u003d2 è¯¦æƒ…æ¥å£åº”è¯¥è¿”å› 404)\n        mockMvc.perform(get(\"/api/products/2\"))\n                .andExpect(status().isNotFound()",
      "aiProbability": 70,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 114
    },
    {
      "filePath": "C:/Users/22951/IdeaProjects/Shop-Data-Manager/src/test/java/com/docker/mall/shopdatamanager/ShopDataManagerApplicationTests.java",
      "timestamp": 1763795205109,
      "startOffset": 2090,
      "endOffset": 3187,
      "codeContent": "\n        mockMvc.perform(get(\"/api/products?page\u003d0\u0026size\u003d5\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.content\").isArray()) // éªŒè¯è¿”å›çš„æ˜¯åˆ†é¡µç»“æ„\n                .andExpect(jsonPath(\"$.totalPages\").exists())\n                // âš ï¸ å·²å›æ»šï¼šåˆ—è¡¨ç°åœ¨æ˜¯å€’åºæ’åˆ—ï¼Œç¬¬ä¸€ä¸ªåº”è¯¥æ˜¯ ID æœ€å¤§çš„æœ€æ–°å•†å“\n                .andExpect(jsonPath(\"$.content[0].name\").value(\"æµ‹è¯•å•†å“ - é”®ç›˜\")); \n\n        // 2.2 æµ‹è¯•æ¨¡ç³ŠæŸ¥è¯¢åŠŸèƒ½ (æ ¹æ® name\u003dé”®ç›˜ æœç´¢)\n        mockMvc.perform(get(\"/api/products?name\u003dé”®ç›˜\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.content\").isArray())\n                // âš ï¸ å·²å›æ»šï¼šæœç´¢ç»“æœä¹Ÿæ˜¯å€’åºï¼Œç¬¬ä¸€ä¸ªåº”è¯¥æ˜¯ ID æœ€å¤§çš„æœ€æ–°å•†å“\n                .andExpect(jsonPath(\"$.content[0].name\").value(\"æµ‹è¯•å•†å“ - é”®ç›˜\")); \n    }\n    \n    // 3. æµ‹è¯•è·å–è¯¦æƒ… (Read - Detail)\n    @Test\n    @Order(3)\n    void testGetProductById() throws Exception {\n        // æŸ¥è¯¢ ID\u003d3 çš„å•†å“ (\"æœºæ¢°é”®ç›˜\")ï¼Œä¿æŒè¿™ä¸ª ID ä»¥é˜²æ­¢æ•°æ®æ±¡æŸ“ï¼Œç¡®ä¿æµ‹è¯•å¯é æ€§ã€‚\n        mockMvc.perform(get(\"/api/products/3\"))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.id\").value(3L))\n                .andExpect(jsonPath(\"$.name\").value(\"æœºæ¢°é”®ç›˜\")); \n        ",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 26
    }
  ],
  "toolStats": {
    "AI Assistant": {
      "usageCount": 12,
      "totalLines": 556
    }
  }
}